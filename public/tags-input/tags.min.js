function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),pTags=function(){"use strict";var t=!!document.querySelector&&!!document.addEventListener,e={initClass:"p-tag",handlerInputWidth:"15em"},n=function(){function n(r){if(_classCallCheck(this,n),!t)throw new Error("Not support. Required support querySelector and addEventListener!");this.settings=Object.assign(e,r||{}),this.createTagElement(),this.initHandler()}return _createClass(n,[{key:"initHandler",value:function(){function t(t){if(0==a.selectionStart&&(8==t.keyCode||37==t.keyCode)&&null!=t.target.previousSibling&&(t.preventDefault(),r.editTag(t.target.previousSibling)),a.selectionStart==r.handlerInput.value.length&&39==t.keyCode&&null!=t.target.nextSibling){t.preventDefault();var e=t.target.value;r.addTagsFromString(e),r.editTag(t.target.nextSibling),t.target.setSelectionRange(0,0)}13==t.keyCode&&(n(t),t.target.focus())}function e(t){var e=t.target.value,n=e.split(/[\s;\t\,]/);if(n.length<2)return!1;var a=r.addTagsFromString(e);if(a.length>1){var i=a[a.length-1];r.editTag(i)}else t.target.value=""}function n(t){var e=t.target;r.addTagsFromString(e.value),r.contaner.appendChild(e),e.value=""}var r=this,a=this.handlerInput;a.addEventListener("keydown",t),a.addEventListener("input",e),a.addEventListener("blur",n)}},{key:"addTag",value:function(t){if(""===t||-1!=this.returnIndexTag(t))return null;var e=document.createElement("span");e.className="post-tag",e.insertAdjacentHTML("afterBegin",'<span class="name-tag">'+t+'</span><span class="delete-tag">&nbsp;<div id="cross"></div><div></div></span>');var n=this;e.addEventListener("click",function(){n.editTag(this)},!1),e.lastChild.addEventListener("click",function(t){n.removeByObject(this.parentNode),t.stopPropagation()},!1);var r=this.contaner;return this.handlerInput.style.width=this.settings.handlerInputWidth,r.insertBefore(e,this.handlerInput),this.originalInput.value+=(this.originalInput.value?";":"")+t,e}},{key:"addTagsFromString",value:function(t){var e=t.split(/[\s;\t\,]/),n=[],r=!0,a=!1,i=void 0;try{for(var s,l=e[Symbol.iterator]();!(r=(s=l.next()).done);r=!0){var u=s.value,o=this.addTag(u);o&&n.push(o)}}catch(d){a=!0,i=d}finally{try{!r&&l["return"]&&l["return"]()}finally{if(a)throw i}}return n}},{key:"createTagElement",value:function(){var t=document.querySelector(this.settings.selector);if(t&&"INPUT"==t.tagName){t.style.display="none";var e=document.createElement("div");e.className="tag",e.insertAdjacentHTML("afterBegin",'<input type="text" class="handler-tag">');var n=t.parentNode;n.insertBefore(e,t),this.originalInput=t,this.handlerInput=e.children[0],this.contaner=e}}},{key:"remove",value:function(t){var e=void 0,n=!0,r=!1,a=void 0;try{for(var i,s=this.contaner[Symbol.iterator]();!(n=(i=s.next()).done)&&(e=i.value,t!=e.firstChild.textContent);n=!0);}catch(l){r=!0,a=l}finally{try{!n&&s["return"]&&s["return"]()}finally{if(r)throw a}}return e?this.removeByObject(e):!1}},{key:"removeByObject",value:function(t){var e=t.firstChild.textContent,n=this.returnIndexTag(e);if(this.contaner.removeChild(t),-1==n)return!1;var r=this.originalInput.value,a=r.split(";");return a.splice(n,1),this.originalInput.value=a.join(";"),!0}},{key:"returnIndexTag",value:function(t){var e=this.originalInput.value,n=e.split(";");return n.indexOf(t)}},{key:"focus",value:function(){this.handlerInput.focus()}},{key:"editTag",value:function(t){var e=t.firstChild.textContent,n=t.clientWidth;this.contaner.insertBefore(this.handlerInput,t),this.handlerInput.value=e,this.handlerInput.style.width=n+"px",this.handlerInput.focus(),this.removeByObject(t)}},{key:"value",get:function(){return this.originalInput.value},set:function(t){this.addTagsFromString(t)}}]),n}();return n}();!function(){"undefined"!=typeof module&&module.exports?module.exports=pTags:window.pTags=pTags}();